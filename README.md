# yads-bash-software-design

## Команды 
- cat [FILE] — вывести на экран содержимое файла;
- echo — вывести на экран свой аргумент (или аргументы);
- wc [FILE] — вывести количество строк, слов и байт в веденном тексти, или в файле, если он указан;
- pwd — распечатать текущую директорию;
- exit — выйти из интерпретатора;
- VAR=VALUE — присвоить значение переменной;
  - `x="2" | echo $x` — НЕ РАБОТАЕТ!
- исполняемый файл.


## Описание 

У нас будет 2 основные компоненты:

`Parser` и `Executer`

## Parser

1. Принимает input.
2. `CommandSplitter` — парсит комманды. Сплиттим на команды по | вне кавычек.
   2.1. `ParseCommandAndArguments` — парсит отдельно комманду/агрументы.
   
   2.2. `Substitution` — производит подстановку переменных соответствуя правилам.
3. Возвращает `Pipeline` пайплайн (удаляя инициализацию переменных) или одну команду.

### Особенности

- Операторы пайплайна, присваивания, определяются символами =, | без кавычек, если эти символы находятся внутри кавычек – это просто строка.
- Оператор $ выполняет подстановку только внутри двойных кавычек.
- Внутри пайплайна не выполняются операторы присваивания, т.е такие операции просто исключаются из пайплайна на этапе парсинга.

## Executer

1. `ExecuteCommands` — выполняет комманды.
   
   1.1. `ExcuteCommand` — выполняет первую в очереди команду.
   
   1.2. Выводит в stderr в случае ошибки
   
   1.3. Возвращает `CommandResponse` состояший из stdout команды, и status code.

   1.4. Если команд не осталось — выходим.
   
   1.5. Если еще остались команды, сохраняем `CommandResponse`, и отправляем stdout в следующую команжу и запускаем 1.1.
2. Выводим последний stdout.

### Особенности:

Если код возврата положительный и в `Exexutor` передан `Pipeline`, подает вывод на вход следующей команды.

Если возникла ошибка, просто выполняет следующую команду.

## Диаграмма
Сыллка на диаграмму https://drive.google.com/file/d/1q-_mMVWoTSVS6rWc0qTotnG52RHVGR_T/view?usp=sharing

Голубым обочначены компоненты, которые будут реализованы во второй фазе реализации. В первой части будет реализовано все остальное.